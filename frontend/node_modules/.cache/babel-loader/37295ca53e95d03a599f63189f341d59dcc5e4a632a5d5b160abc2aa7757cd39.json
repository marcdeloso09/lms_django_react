{"ast":null,"code":"import React, { useState, useEffect, useRef, useCallback } from \"react\";\nconst [scrollVelocity, setScrollVelocity] = useState(0);\nconst [hoverDuration, setHoverDuration] = useState(0);\nconst [action, setAction] = useState(\"Normal\");\nconst [focusMode, setFocusMode] = useState(false);\nconst [focusedChatIds, setFocusedChatIds] = useState([]);\nconst lastScrollY = useRef(window.scrollY);\nconst lastTime = useRef(Date.now());\nconst hoverStartTime = useRef(null);\nconst enlargeTimeoutRef = useRef(null);\nconst [clickErrorRate, setClickErrorRate] = useState(0);\nconst [clickModeActive, setClickModeActive] = useState(false);\nconst totalClicksRef = useRef(0);\nconst errorClicksRef = useRef(0);\nconst clickModeTimeoutRef = useRef(null);\nconst triggerEnlargeMode = useCallback(() => {\n  var _document$querySelect;\n  document.body.classList.add(\"enlarge-mode\");\n  (_document$querySelect = document.querySelector(\".chat-container\")) === null || _document$querySelect === void 0 ? void 0 : _document$querySelect.classList.add(\"enlarged\");\n  clearTimeout(enlargeTimeoutRef.current);\n  enlargeTimeoutRef.current = setTimeout(() => {\n    var _document$querySelect2;\n    document.body.classList.remove(\"enlarge-mode\");\n    (_document$querySelect2 = document.querySelector(\".chat-container\")) === null || _document$querySelect2 === void 0 ? void 0 : _document$querySelect2.classList.remove(\"enlarged\");\n    if (!clickModeActive && !focusMode) setAction(\"Normal\");\n  }, 10000);\n}, [clickModeActive, focusMode]);\nuseEffect(() => {\n  const handleScroll = () => {\n    const currentY = window.scrollY;\n    const currentTime = Date.now();\n    const dy = Math.abs(currentY - lastScrollY.current);\n    const dt = (currentTime - lastTime.current) / 1000; // in seconds\n\n    const velocity = dt > 0 ? dy / dt : 0;\n    setScrollVelocity(velocity);\n    lastScrollY.current = currentY;\n    lastTime.current = currentTime;\n    if (velocity < 30 && velocity > 0) {\n      setAction(\"Slow Scroll Detected\");\n      triggerEnlargeMode();\n    }\n  };\n  window.addEventListener(\"scroll\", handleScroll, {\n    passive: true\n  });\n  return () => window.removeEventListener(\"scroll\", handleScroll);\n}, [triggerEnlargeMode]);\nconst handleChatMouseEnter = id => {\n  hoverStartTime.current = Date.now();\n  const hoverInterval = setInterval(() => {\n    const elapsed = ((Date.now() - hoverStartTime.current) / 1000).toFixed(1);\n    setHoverDuration(elapsed);\n  }, 100);\n  window.hoverInterval = hoverInterval;\n  setTimeout(() => {\n    setFocusMode(true);\n    setFocusedChatIds(prev => prev.includes(id) ? prev : [...prev, id]);\n    setAction(\"Focus Mode\");\n    clearTimeout(window.focusTimeout);\n    window.focusTimeout = setTimeout(() => {\n      setFocusMode(false);\n      setFocusedChatIds([]);\n      if (!clickModeActive) setAction(\"Normal\");\n    }, 10000);\n  }, 3000);\n};\nconst handleChatMouseLeave = () => {\n  clearInterval(window.hoverInterval);\n  setHoverDuration(0);\n  hoverStartTime.current = null;\n};\nconst triggerClickErrorMode = useCallback(rate => {\n  var _document$querySelect3;\n  setClickModeActive(true);\n  setAction(\"Click Error Mode Active\");\n  (_document$querySelect3 = document.querySelector(\".chat-container\")) === null || _document$querySelect3 === void 0 ? void 0 : _document$querySelect3.classList.add(\"click-error-enlarged\");\n  clearTimeout(clickModeTimeoutRef.current);\n  clickModeTimeoutRef.current = setTimeout(() => {\n    var _document$querySelect4;\n    setClickModeActive(false);\n    (_document$querySelect4 = document.querySelector(\".chat-container\")) === null || _document$querySelect4 === void 0 ? void 0 : _document$querySelect4.classList.remove(\"click-error-enlarged\");\n    totalClicksRef.current = 0;\n    errorClicksRef.current = 0;\n    setClickErrorRate(0);\n    setAction(\"Normal\");\n  }, 10000);\n}, []);\nuseEffect(() => {\n  const onDocClick = e => {\n    totalClicksRef.current += 1;\n    const insideChat = !!e.target.closest(\".chat-container\");\n    if (!insideChat) errorClicksRef.current += 1;\n    const rate = errorClicksRef.current / totalClicksRef.current * 100;\n    setClickErrorRate(rate);\n    if (rate > 15 && !clickModeActive) {\n      triggerClickErrorMode(rate);\n    }\n  };\n  document.addEventListener(\"click\", onDocClick);\n  return () => document.removeEventListener(\"click\", onDocClick);\n}, [clickModeActive, triggerClickErrorMode]);","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","scrollVelocity","setScrollVelocity","hoverDuration","setHoverDuration","action","setAction","focusMode","setFocusMode","focusedChatIds","setFocusedChatIds","lastScrollY","window","scrollY","lastTime","Date","now","hoverStartTime","enlargeTimeoutRef","clickErrorRate","setClickErrorRate","clickModeActive","setClickModeActive","totalClicksRef","errorClicksRef","clickModeTimeoutRef","triggerEnlargeMode","_document$querySelect","document","body","classList","add","querySelector","clearTimeout","current","setTimeout","_document$querySelect2","remove","handleScroll","currentY","currentTime","dy","Math","abs","dt","velocity","addEventListener","passive","removeEventListener","handleChatMouseEnter","id","hoverInterval","setInterval","elapsed","toFixed","prev","includes","focusTimeout","handleChatMouseLeave","clearInterval","triggerClickErrorMode","rate","_document$querySelect3","_document$querySelect4","onDocClick","e","insideChat","target","closest"],"sources":["C:/Users/Administrator/Desktop/LMS - Django_React/frontend/src/Components/Assets/MsTeams/useUserBehavior.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from \"react\";\r\n\r\nconst [scrollVelocity, setScrollVelocity] = useState(0);\r\nconst [hoverDuration, setHoverDuration] = useState(0);\r\nconst [action, setAction] = useState(\"Normal\");\r\nconst [focusMode, setFocusMode] = useState(false);\r\nconst [focusedChatIds, setFocusedChatIds] = useState([]);\r\n\r\nconst lastScrollY = useRef(window.scrollY);\r\nconst lastTime = useRef(Date.now());\r\nconst hoverStartTime = useRef(null);\r\nconst enlargeTimeoutRef = useRef(null);\r\n\r\nconst [clickErrorRate, setClickErrorRate] = useState(0);\r\nconst [clickModeActive, setClickModeActive] = useState(false);\r\nconst totalClicksRef = useRef(0);\r\nconst errorClicksRef = useRef(0);\r\nconst clickModeTimeoutRef = useRef(null);\r\n\r\nconst triggerEnlargeMode = useCallback(() => {\r\n  document.body.classList.add(\"enlarge-mode\");\r\n  document.querySelector(\".chat-container\")?.classList.add(\"enlarged\");\r\n\r\n  clearTimeout(enlargeTimeoutRef.current);\r\n  enlargeTimeoutRef.current = setTimeout(() => {\r\n    document.body.classList.remove(\"enlarge-mode\");\r\n    document.querySelector(\".chat-container\")?.classList.remove(\"enlarged\");\r\n    if (!clickModeActive && !focusMode) setAction(\"Normal\");\r\n  }, 10000);\r\n}, [clickModeActive, focusMode]);\r\n\r\nuseEffect(() => {\r\n  const handleScroll = () => {\r\n    const currentY = window.scrollY;\r\n    const currentTime = Date.now();\r\n    const dy = Math.abs(currentY - lastScrollY.current);\r\n    const dt = (currentTime - lastTime.current) / 1000; // in seconds\r\n\r\n    const velocity = dt > 0 ? dy / dt : 0;\r\n    setScrollVelocity(velocity);\r\n    lastScrollY.current = currentY;\r\n    lastTime.current = currentTime;\r\n\r\n    if (velocity < 30 && velocity > 0) {\r\n      setAction(\"Slow Scroll Detected\");\r\n      triggerEnlargeMode();\r\n    }\r\n  };\r\n\r\n  window.addEventListener(\"scroll\", handleScroll, { passive: true });\r\n  return () => window.removeEventListener(\"scroll\", handleScroll);\r\n}, [triggerEnlargeMode]);\r\n\r\nconst handleChatMouseEnter = (id) => {\r\n  hoverStartTime.current = Date.now();\r\n  const hoverInterval = setInterval(() => {\r\n    const elapsed = ((Date.now() - hoverStartTime.current) / 1000).toFixed(1);\r\n    setHoverDuration(elapsed);\r\n  }, 100);\r\n  window.hoverInterval = hoverInterval;\r\n\r\n  setTimeout(() => {\r\n    setFocusMode(true);\r\n    setFocusedChatIds((prev) => (prev.includes(id) ? prev : [...prev, id]));\r\n    setAction(\"Focus Mode\");\r\n    clearTimeout(window.focusTimeout);\r\n    window.focusTimeout = setTimeout(() => {\r\n      setFocusMode(false);\r\n      setFocusedChatIds([]);\r\n      if (!clickModeActive) setAction(\"Normal\");\r\n    }, 10000);\r\n  }, 3000);\r\n};\r\n\r\nconst handleChatMouseLeave = () => {\r\n  clearInterval(window.hoverInterval);\r\n  setHoverDuration(0);\r\n  hoverStartTime.current = null;\r\n};\r\n\r\nconst triggerClickErrorMode = useCallback((rate) => {\r\n  setClickModeActive(true);\r\n  setAction(\"Click Error Mode Active\");\r\n  document.querySelector(\".chat-container\")?.classList.add(\"click-error-enlarged\");\r\n\r\n  clearTimeout(clickModeTimeoutRef.current);\r\n  clickModeTimeoutRef.current = setTimeout(() => {\r\n    setClickModeActive(false);\r\n    document.querySelector(\".chat-container\")?.classList.remove(\"click-error-enlarged\");\r\n    totalClicksRef.current = 0;\r\n    errorClicksRef.current = 0;\r\n    setClickErrorRate(0);\r\n    setAction(\"Normal\");\r\n  }, 10000);\r\n}, []);\r\n\r\nuseEffect(() => {\r\n  const onDocClick = (e) => {\r\n    totalClicksRef.current += 1;\r\n    const insideChat = !!e.target.closest(\".chat-container\");\r\n    if (!insideChat) errorClicksRef.current += 1;\r\n\r\n    const rate = (errorClicksRef.current / totalClicksRef.current) * 100;\r\n    setClickErrorRate(rate);\r\n\r\n    if (rate > 15 && !clickModeActive) {\r\n      triggerClickErrorMode(rate);\r\n    }\r\n  };\r\n\r\n  document.addEventListener(\"click\", onDocClick);\r\n  return () => document.removeEventListener(\"click\", onDocClick);\r\n}, [clickModeActive, triggerClickErrorMode]);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}